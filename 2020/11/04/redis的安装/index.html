<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>redis安装 | Germinjane</title><meta name="author" content="Germinjane"><meta name="copyright" content="Germinjane"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="介绍 Redis是一个使用ANSI C编写的开源、支持网络、基于内存、可选持久性的键值对(key-value)存储数据库。从2015年6月开始，Redis的开发由Redis Labs赞助，而2013年5月至2015年6月期间，其开发由Pivotal赞助。在2013年5月之前，其开发由VMware赞助。根据月度排行网站DB-Engines.com的数据显示，Redis是最流行的键值对存储数据库。">
<meta property="og:type" content="article">
<meta property="og:title" content="redis安装">
<meta property="og:url" content="https://germinjane.github.io/2020/11/04/redis%E7%9A%84%E5%AE%89%E8%A3%85/index.html">
<meta property="og:site_name" content="Germinjane">
<meta property="og:description" content="介绍 Redis是一个使用ANSI C编写的开源、支持网络、基于内存、可选持久性的键值对(key-value)存储数据库。从2015年6月开始，Redis的开发由Redis Labs赞助，而2013年5月至2015年6月期间，其开发由Pivotal赞助。在2013年5月之前，其开发由VMware赞助。根据月度排行网站DB-Engines.com的数据显示，Redis是最流行的键值对存储数据库。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fiona-chang.oss-cn-shenzhen.aliyuncs.com/study/future_logo.jpg">
<meta property="article:published_time" content="2020-11-04T12:32:47.000Z">
<meta property="article:modified_time" content="2024-11-04T13:44:43.744Z">
<meta property="article:author" content="Germinjane">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fiona-chang.oss-cn-shenzhen.aliyuncs.com/study/future_logo.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://germinjane.github.io/2020/11/04/redis%E7%9A%84%E5%AE%89%E8%A3%85/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'redis安装',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-11-04 21:44:43',
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://fiona-chang.oss-cn-shenzhen.aliyuncs.com/study/future_logo.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> PHP</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/php/redis/"><span> Redis</span></a></li><li><a class="site-page child" href="/php/swoole/"><span> Swoole</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> AI人工智能</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/ai/ai-basic/"><span> 基础入门</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://fiona-chang.oss-cn-shenzhen.aliyuncs.com/landscape/mmexport1554553293075.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Germinjane</span></a><a class="nav-page-title" href="/"><span class="site-name">redis安装</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> PHP</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/php/redis/"><span> Redis</span></a></li><li><a class="site-page child" href="/php/swoole/"><span> Swoole</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> AI人工智能</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/ai/ai-basic/"><span> 基础入门</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">redis安装</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-11-04T12:32:47.000Z" title="发表于 2020-11-04 20:32:47">2020-11-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-11-04T13:44:43.744Z" title="更新于 2024-11-04 21:44:43">2024-11-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><blockquote>
<p>Redis是一个使用ANSI C编写的开源、支持网络、基于内存、可选持久性的键值对(key-value)存储数据库。从2015年6月开始，Redis的开发由Redis Labs赞助，而2013年5月至2015年6月期间，其开发由Pivotal赞助。在2013年5月之前，其开发由VMware赞助。根据月度排行网站DB-Engines.com的数据显示，Redis是最流行的键值对存储数据库。</p>
</blockquote>
<h3 id="相关网站"><a href="#相关网站" class="headerlink" title="相关网站"></a>相关网站</h3><ul>
<li>官方网站：<a target="_blank" rel="noopener" href="https://redis.io/">https://redis.io</a></li>
<li>官方文档：<a target="_blank" rel="noopener" href="https://redis.io/docs/">https://redis.io/docs/</a></li>
<li>官方各版本下载地址：<a target="_blank" rel="noopener" href="http://download.redis.io/releases/">http://download.redis.io/releases/</a></li>
<li>Redis 中文命令参考：<a target="_blank" rel="noopener" href="http://www.redis.cn/commands.html">http://www.redis.cn/commands.html</a></li>
<li>中文网站1：<a target="_blank" rel="noopener" href="http://redis.cn/">http://redis.cn</a></li>
<li>中文网站2：<a target="_blank" rel="noopener" href="http://www.redis.net.cn/">http://www.redis.net.cn</a></li>
</ul>
<h2 id="redis安装"><a href="#redis安装" class="headerlink" title="redis安装"></a>redis安装</h2><p>系统环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@ansible ~]# cat /etc/redhat-release </span><br><span class="line">CentOS Linux release 7.8.2003 (Core)</span><br><span class="line">[root@ansible ~]# uname -r</span><br><span class="line">3.10.0-1127.8.2.el7.x86_64</span><br><span class="line">[root@ansible ~]# getenforce </span><br><span class="line">Disabled</span><br><span class="line">[root@ansible ~]# hostname -I</span><br><span class="line">192.168.18.130 172.17.0.1 </span><br></pre></td></tr></table></figure>

<p>安装redis</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ yum -y install gcc gcc-c++ kernel-devel</span><br><span class="line">$ cd /usr/local/</span><br><span class="line"># http://download.redis.io/releases/redis-7.0.9.tar.gz</span><br><span class="line">$ wget http://download.redis.io/releases/redis-5.0.9.tar.gz</span><br><span class="line">$ tar -zxvf redis-5.0.9.tar.gz </span><br><span class="line">$ mv redis-5.0.9 redis</span><br><span class="line">$ cd /usr/local/redis/</span><br><span class="line">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p>查看版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ /usr/local/redis/src/redis-cli --version</span><br><span class="line">redis-cli 5.0.9</span><br><span class="line">$ /usr/local/redis/src/redis-server --version</span><br><span class="line">Redis server v=5.0.9 sha=00000000:0 malloc=jemalloc-5.1.0 bits=64 build=b33b46ba51607985</span><br></pre></td></tr></table></figure>
<p>创建软连接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ln -s /usr/local/redis/src/redis-cli /usr/bin/</span><br><span class="line">$ ln -s /usr/local/redis/src/redis-server /usr/bin/</span><br></pre></td></tr></table></figure>

<p>修改配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir /etc/redis</span><br><span class="line">$ cp /usr/local/redis/redis.conf /etc/redis/6379.conf</span><br><span class="line">$ vim /etc/redis/6379.conf</span><br><span class="line"></span><br><span class="line"># 修改的配置如下：</span><br><span class="line">daemonize yes</span><br></pre></td></tr></table></figure>

<p>设置开机自启：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cp /usr/local/redis/utils/redis_init_script /etc/init.d/redis</span><br><span class="line">$ vim /etc/init.d/redis</span><br><span class="line"></span><br><span class="line"># 在/etc/init.d/redis开头第二行添加内容</span><br><span class="line"># chkconfig: 2345 90 10</span><br><span class="line"># Description: Redis data structure server</span><br></pre></td></tr></table></figure>
<p>修改后 <code>/etc/init.d/redis</code> 的完整文件内容如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">chkconfig: 2345 90 10</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Description: Redis data structure server</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Simple Redis init.d script conceived to work on Linux systems</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">as it does use of the /proc filesystem.</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## BEGIN INIT INFO</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Provides:     redis_6379</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Default-Start:        2 3 4 5</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Default-Stop:         0 1 6</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Short-Description:    Redis data structure server</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Description:          Redis data structure server. See https://redis.io</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## END INIT INFO</span></span></span><br><span class="line"></span><br><span class="line">REDISPORT=6379</span><br><span class="line">EXEC=/usr/local/bin/redis-server</span><br><span class="line">CLIEXEC=/usr/local/bin/redis-cli</span><br><span class="line"></span><br><span class="line">PIDFILE=/var/run/redis_$&#123;REDISPORT&#125;.pid</span><br><span class="line">CONF=&quot;/etc/redis/$&#123;REDISPORT&#125;.conf&quot;</span><br><span class="line"></span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">    start)</span><br><span class="line">        if [ -f $PIDFILE ]</span><br><span class="line">        then</span><br><span class="line">                echo &quot;$PIDFILE exists, process is already running or crashed&quot;</span><br><span class="line">        else</span><br><span class="line">                echo &quot;Starting Redis server...&quot;</span><br><span class="line">                $EXEC $CONF</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        if [ ! -f $PIDFILE ]</span><br><span class="line">        then</span><br><span class="line">                echo &quot;$PIDFILE does not exist, process is not running&quot;</span><br><span class="line">        else</span><br><span class="line">                PID=$(cat $PIDFILE)</span><br><span class="line">                echo &quot;Stopping ...&quot;</span><br><span class="line">                $CLIEXEC -p $REDISPORT shutdown</span><br><span class="line">                while [ -x /proc/$&#123;PID&#125; ]</span><br><span class="line">                do</span><br><span class="line">                    echo &quot;Waiting for Redis to shutdown ...&quot;</span><br><span class="line">                    sleep 1</span><br><span class="line">                done</span><br><span class="line">                echo &quot;Redis stopped&quot;</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        echo &quot;Please use start or stop as first argument&quot;</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>添加开启开机自启</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x /etc/init.d/redis # 添加可执行权限</span><br><span class="line">$ chkconfig --add redis     </span><br><span class="line">$ chkconfig redis on</span><br></pre></td></tr></table></figure>
<p>redis启动和停止</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ service redis start</span><br><span class="line">$ service redis stop</span><br></pre></td></tr></table></figure>

<h2 id="redis7介绍"><a href="#redis7介绍" class="headerlink" title="redis7介绍"></a>redis7介绍</h2><h3 id="redis7-的新特性"><a href="#redis7-的新特性" class="headerlink" title="redis7 的新特性"></a>redis7 的新特性</h3><ul>
<li>新增 Function 自定义函数库，函数库支持持久化与可复制。</li>
<li>Lua脚本（脚本本身代码）不再支持持久化和复制，仅对命令执行结果进行持久化和复制。</li>
<li>ACL支持对 Pub&#x2F;Sub channel 的权限控制。</li>
<li>支持 Multi-Part AOF，AOF文件可以拆分多个</li>
<li>支持 Client-Eviction。</li>
<li>支持 Sharded-Pub&#x2F;Sub。</li>
<li>支持命令执行耗时直方图。</li>
<li>支持子命令级别的性能统计。</li>
<li>Ziplist 编码替换为 Listpack 编码。</li>
<li>支持 Global Replication Buffer。</li>
</ul>
<h3 id="redis7-的安装"><a href="#redis7-的安装" class="headerlink" title="redis7 的安装"></a>redis7 的安装</h3><p>环境说明</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@middleware01 ~]# cat /etc/redhat-release </span><br><span class="line">CentOS Linux release 7.9.2009 (Core)</span><br><span class="line"></span><br><span class="line">[root@middleware01 ~]# uname -a</span><br><span class="line">Linux middleware01 3.10.0-1160.el7.x86_64 #1 SMP Mon Oct 19 16:18:59 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</span><br><span class="line"></span><br><span class="line">[root@middleware01 ~]# hostname -I</span><br><span class="line">192.168.30.65 </span><br></pre></td></tr></table></figure>

<p>Linux 安装 redis 之前必须具备 gcc 编译环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@middleware01 ~]# gcc -v</span><br><span class="line">Using built-in specs.</span><br><span class="line">COLLECT_GCC=gcc</span><br><span class="line">COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/4.8.5/lto-wrapper</span><br><span class="line">Target: x86_64-redhat-linux</span><br><span class="line">Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --disable-libgcj --with-isl=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/isl-install --with-cloog=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/cloog-install --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux</span><br><span class="line">Thread model: posix</span><br><span class="line">gcc version 4.8.5 20150623 (Red Hat 4.8.5-44) (GCC)</span><br></pre></td></tr></table></figure>

<p>如果没有，可以执行下面命令进行安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yum install -y gcc-c++</span></span><br></pre></td></tr></table></figure>

<p>接下来进行安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载压缩包</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wget http://download.redis.io/releases/redis-7.0.9.tar.gz</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解压</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tar -zxvf redis-7.0.9.tar.gz</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将解压后的redis目录移动到自己要安装的目录</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mv</span> redis-7.0.9 /usr/local/redis</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编译安装</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> /usr/local/redis &amp;&amp; make &amp;&amp; make install</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装完成之后，默认会在 /usr/local/bin 目录下生成一些二进制文件</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> -al /usr/local/bin/</span></span><br><span class="line">-rwxr-xr-x   1 root root  5197776 May  8 14:55 redis-benchmark</span><br><span class="line">lrwxrwxrwx   1 root root       12 May  8 14:55 redis-check-aof -&gt; redis-server</span><br><span class="line">lrwxrwxrwx   1 root root       12 May  8 14:55 redis-check-rdb -&gt; redis-server</span><br><span class="line">-rwxr-xr-x   1 root root  5411112 May  8 14:55 redis-cli</span><br><span class="line">lrwxrwxrwx   1 root root       12 May  8 14:55 redis-sentinel -&gt; redis-server</span><br><span class="line">-rwxr-xr-x   1 root root 11428552 May  8 14:55 redis-server</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ul>
<li><code>redis-benchmark</code>：性能测试工具，服务启动后运行该命令</li>
<li><code>redis-check-aof</code>：用于修复有问题的 aof 文件</li>
<li><code>redis-check-rdb</code>：用于修复有问题的 rdb 文件</li>
<li><code>redis-cli</code>：redis 客户端，操作入口</li>
<li><code>redis-sentinel</code>：redis 集群使用</li>
<li><code>redis-server</code>：redis 服务器</li>
</ul>
<p><strong>定义 redis 的配置文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在redis安装目录中有一个默认的 redis.conf 配置文件</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> /usr/local/redis/redis.conf</span> </span><br><span class="line">/usr/local/redis/redis.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建新的redis数据目录，并拷贝配置文件</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> -p /data/redis &amp;&amp; <span class="built_in">cp</span> /usr/local/redis/redis.conf /data/redis/</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在新的 redis.conf 配置文件中，修改以下内容</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">vim /data/redis/redis.conf</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置监听本机IP，默认监听127.0.0.1不能远程访问</span></span><br><span class="line">bind 192.168.30.65</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭保护模式</span></span><br><span class="line">protected-mode no</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">后台运行redis</span></span><br><span class="line">daemonize yes</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置密码</span></span><br><span class="line">requirepass admin666</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将redis持久化文件保存到指定的目录</span></span><br><span class="line">dir /data/redis/</span><br></pre></td></tr></table></figure>

<p><strong>启动服务和连接服务</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">redis-server /data/redis/redis.conf</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查端口</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netstat -lntp | grep redis</span></span><br><span class="line">tcp        0      0 192.168.30.65:6379      0.0.0.0:*               LISTEN      18729/redis-server</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查进程</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ps aux | grep redis</span></span><br><span class="line">root      18729  0.3  0.2 163160  8376 ?        Ssl  08:40   0:00 redis-server 192.168.30.65:6379</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">连接服务 语法：redis-cli -p 端口 -h 指定redis服务器的地址 -a 密码</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">redis-cli -p 6379 -h 192.168.30.65</span> </span><br><span class="line">192.168.30.65:6379&gt; AUTH admin666 </span><br><span class="line">OK</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">敲入 ping 命令，返回 pong 说明 redis 服务器正常运行</span></span><br><span class="line">192.168.30.65:6379&gt; ping</span><br><span class="line">PONG</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果命令行连接使用 -a 选项会有警告信息，如下</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">redis-cli -p 6379 -h 192.168.30.65 -a admin666</span></span><br><span class="line">Warning: Using a password with &#x27;-a&#x27; or &#x27;-u&#x27; option on the command line interface may not be safe.</span><br><span class="line">192.168.30.65:6379&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">不想看到警告信息，警告信息属于标准错误信息，可以重定向到 /dev/null 忽略即可</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">redis-cli -p 6379 -h 192.168.30.65 -a admin666 2&gt;/dev/null</span></span><br><span class="line">192.168.30.65:6379&gt; </span><br></pre></td></tr></table></figure>

<p><strong>关闭 redis 服务</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭redis-server</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">redis-cli -h 192.168.30.65 -a admin666 shutdown</span></span><br><span class="line">Warning: Using a password with &#x27;-a&#x27; or &#x27;-u&#x27; option on the command line interface may not be safe.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查已经没有进程了</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ps axu | grep redis</span></span><br><span class="line">root      18752  0.0  0.0 112812   980 pts/0    R+   08:56   0:00 grep --color=auto redis</span><br></pre></td></tr></table></figure>

<h3 id="docker-compose-部署-redis7"><a href="#docker-compose-部署-redis7" class="headerlink" title="docker-compose 部署 redis7"></a>docker-compose 部署 redis7</h3><p>首先，去 github 下载一份 redis 配置文件，<a target="_blank" rel="noopener" href="https://github.com/redis/redis/blob/7.0/redis.conf">https://github.com/redis/redis/blob/7.0/redis.conf</a></p>
<p>下载下来的 redis.conf 需要修改一些配置</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bind 0.0.0.0</span><br><span class="line">port 6379</span><br><span class="line">requirepass &quot;fB3XVvkpPAseAHJCJu7aqQ==&quot;</span><br><span class="line">logfile &quot;/logs/redis.log&quot;</span><br><span class="line"># 开启appendonly持久化</span><br><span class="line">appendonly yes</span><br></pre></td></tr></table></figure>

<p>下载完成之后，开始部署</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ <span class="built_in">mkdir</span> /app/redis7.0.5</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> /app/redis7.0.5</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> conf data logs &amp;&amp; <span class="built_in">chmod</span> 777 -R logs</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> docker-compose.yml</span></span><br><span class="line">version: &quot;3.3&quot;</span><br><span class="line">services:</span><br><span class="line">  redis7:</span><br><span class="line">    image: redis:7.0.5</span><br><span class="line">    container_name: redis7</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;6379:6379&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - &quot;/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime&quot;</span><br><span class="line">      - &quot;/usr/share/zoneinfo/Asia/Shanghai:/etc/timezone&quot;</span><br><span class="line">      - &quot;./conf:/usr/local/etc/redis&quot;</span><br><span class="line">      - &quot;./data:/data&quot;</span><br><span class="line">      - &quot;./logs:/logs&quot;</span><br><span class="line">    command: redis-server /usr/local/etc/redis/redis.conf</span><br></pre></td></tr></table></figure>

<p>然后 docker-compose up -d 即可。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> /app/redis7.0.5</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker-compose up -d</span></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://germinjane.github.io">Germinjane</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://germinjane.github.io/2020/11/04/redis%E7%9A%84%E5%AE%89%E8%A3%85/">https://germinjane.github.io/2020/11/04/redis%E7%9A%84%E5%AE%89%E8%A3%85/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://germinjane.github.io" target="_blank">Germinjane</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="https://fiona-chang.oss-cn-shenzhen.aliyuncs.com/study/future_logo.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2024/11/04/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;  More info: Writing Run server1$ hexo server  More info: Server Generate static files1$ hexo generate  More info: Generating Deploy to remote sites1$ hexo deploy  More info: Deployment </div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://fiona-chang.oss-cn-shenzhen.aliyuncs.com/study/future_logo.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Germinjane</div><div class="author-info-description">phper博客</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">一起学习，共同进步！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E7%BD%91%E7%AB%99"><span class="toc-number">1.1.</span> <span class="toc-text">相关网站</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">redis安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis7%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.</span> <span class="toc-text">redis7介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#redis7-%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">3.1.</span> <span class="toc-text">redis7 的新特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis7-%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">3.2.</span> <span class="toc-text">redis7 的安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-compose-%E9%83%A8%E7%BD%B2-redis7"><span class="toc-number">3.3.</span> <span class="toc-text">docker-compose 部署 redis7</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><div class="content"><a class="title" href="/2024/11/04/hello-world/" title="Hello World">Hello World</a><time datetime="2024-11-04T12:09:12.011Z" title="发表于 2024-11-04 20:09:12">2024-11-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/11/04/redis%E7%9A%84%E5%AE%89%E8%A3%85/" title="redis安装">redis安装</a><time datetime="2020-11-04T12:32:47.000Z" title="发表于 2020-11-04 20:32:47">2020-11-04</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By Germinjane</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>